<!DOCTYPE html> 
<html> 
<head> 
	<title>marktforschung.de News</title> 
	<meta name="viewport" content="width=device-width, initial-scale=1"> 
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
	<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
	
	<script type="text/javascript">
		
		
		$(document).ready(function(){
			console.log('document.ready');
			
			// init local database
			//var db = window.openDatabase("rootality.de", "1.0", "rootality.de", 1000000);
			//db.transaction(createTables, dbError);
			//db.transaction(queryNews, newsQueryError, newsQuerySuccess);
			
			// get news from live server
			//requestNews();
			
			/*
			$('span.title').on("click", function(){
				alert('test');
				console.log('click');
				if ($(this).next('.newsfold').hasClass('open')) {
					console.log('click on open');
					$(this).next('.newsfold').slideUp().removeClass('open');
				} else {
					console.log('click on closed');
					$(this).next('.newsfold').slideDown().addClass('open');
				}
			});
			*/
			
			// insert news
			//db.transaction(insertNews, dbError, dbSuccess);
		});
		
		//document.addEventListener("deviceready", onDeviceReady, false);
		//function onDeviceReady() {}
		
		// process ajax call for news items
		requestNews = function() {
			console.log('requestNews');
			jQuery.ajax({
				url: "http://rootality.de/?eID=newsapp",
				dataType: 'jsonp',
				jsonp: 'jsoncallback',
				success: function (data) {
					jQuery.each(data, function(i, row) {
						//console.log(row);
						newitem = $('#newstemplate').clone(true, true);
						newitem.find('.date').text(row.datetime);
						newitem.find('.title').text(row.title);
						newitem.find('.bodytext').text(row.bodytext);
						newitem.show();
						jQuery('#newslist').append(newitem.html());
						
					});
				},
				error: function() {
					alert('eid error');
				}
			});
		}
		
	</script>
	
	
</head> 
<body> 

<div data-role="page">

	<div data-role="header">
		<h1>Rootality News</h1>
	</div>
	
	<div data-role="content" class="ui-content">
		
		
		<div data-role="fieldcontain">
			<fieldset data-role="controlgroup" data-type="horizontal">
				<input type="checkbox" name="kat1" id="kat1" class="custom" />
				<label for="kat1">Kategorie 1</label>
				<input type="checkbox" name="kat2" id="kat2" class="custom" />
				<label for="kat2">Kategorie 2</label>
				<input type="checkbox" name="kat3" id="kat3" class="custom" />
				<label for="kat3">Kategorie 3</label>
			</fieldset>
		</div>
		
		
		<div data-role="collapsible-set" data-theme="c" data-mini="true">
			<div data-role="collapsible">
				<h3>Section 1</h3>
				<p>Collapsible content</p>
			</div>
			<div data-role="collapsible">
				<h3>Section 2</h3>
				<p>Collapsible content</p>
			</div>
			<div data-role="collapsible">
				<h3>Section 3</h3>
				<p>Collapsible content</p>
			</div>
		</div>
		
	</div>
	
	<div data-role="footer">
		<h4>&copy; 2012 rootality.de</h4>
	</div><!-- /footer -->
	
	<div id="newstemplate" style="display:none;">
		<li>
			<a href="#"><span class="title"></span><br /></a>
			<span class="newsfold">
				<span class="bodytext"></span>
			</span>
		</li>
	</div>
	
</div><!-- /page -->




</body>
</html>