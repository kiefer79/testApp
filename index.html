<!DOCTYPE html> 
<html>

<head>
	<meta charset="utf-8">
	<!-- <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" /> -->
	
	<title>Kennziffer.com Testapp</title> 
	
	<link rel="stylesheet" href="css/testapp.css" />
	
	<script src="js/cordova-2.3.0.js"></script>
	<script src="js/jquery-1.9.1.min.js"></script>
	<script src="js/db.js"></script>
	
	<script type="text/javascript">
		
		
		$(document).ready(function(){
			$(document).bind('deviceready', function(){
				onDeviceReady();
				setTimeout(function() {
					navigator.splashscreen.hide();
				}, 2000);
			});
		
			// init local database
			var db = window.openDatabase("marktforschung.de", "1.0", "marktforschung.de", 1000000);
			db.transaction(createTables, dbError);
			//db.transaction(queryNews, newsQueryError, newsQuerySuccess);
			
			// get news from live server
			requestNews();
			
			// insert news
			//db.transaction(insertNews, dbError, dbSuccess);
		});
		
		//document.addEventListener("deviceready", onDeviceReady, false);
		function onDeviceReady() {}
		
		// process ajax call for news items
		requestNews = function() {
			jQuery.ajax({
				//url: "http://rootality.de/?eID=newsapp",
				url: "http://192.168.1.12/mafo/cms/?eID=newsapp",
				dataType: 'jsonp',
				jsonp: 'jsoncallback',
				/*
				data: {
					lastID: lastID
				},
				*/
				success: function (data) {
					jQuery.each(data, function(i, row) {
						console.log(row);
						
						/*
						newitem = $('#newstemplate').clone();
						newitem.find('.date').text(row.datetime);
						newitem.find('.title').text(row.title);
						newitem.find('.teaser').text(row.bodytext);
						jQuery('#newslist').append(newitem.html());
						*/
					});
				},
				error: function() {
					alert('eid error');
				}
			});
		}
		
	</script>
	
		
	
	
</head> 

	
<body> 
		
<h2>News</h2>
<ul id="newslist"></ul>

</body>
</html>

<div id="newstemplate">
	<li>
		<span class="title"></span><br />
		<span class="teaser"></span>
	</li>
</div>
